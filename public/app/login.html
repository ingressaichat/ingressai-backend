<!doctype html>
<html lang="pt-BR">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>IngressAI — Login</title>
<body style="font-family:system-ui,Inter,sans-serif;max-width:560px;margin:32px auto;padding:0 16px">
  <h1>Login</h1>
  <p>Digite seu WhatsApp (DDI+DDD+NÚMERO):</p>
  <input id="p" placeholder="5534999992747" style="width:100%;padding:8px;font-size:16px" />
  <button id="b" style="margin-top:12px;padding:8px 12px;font-size:16px">Enviar código</button>
  <p id="m"></p>
  <script>
    const p = document.getElementById('p');
    const b = document.getElementById('b');
    const m = document.getElementById('m');
    b.onclick = async () => {
      const to = (p.value || '').replace(/\D/g, '');
      m.textContent = 'Enviando...';
      try {
        const r = await fetch('/api/test/ping-login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ phone: to })
        });
        m.textContent = r.ok ? 'Código enviado (demo). Veja seu WhatsApp.' : 'Falhou.';
      } catch (e) {
        m.textContent = 'Erro: ' + e;
      }
    };
  </script>
</body>
</html>
